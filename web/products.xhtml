<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<ui:composition template="/templates/default/main.xhtml">
    <ui:define name="content">

        <div class="container-fluid">

            <ui:fragment rendered="#{userController.isAdmin()}">
                <h:link value="Aggiungi un prodotto" outcome="addProduct" />
            </ui:fragment>

            <div class="clearfix">
                <ui:repeat value="#{productController.productList}" var="product">
                    <div class="sm-box">
                        <h:graphicImage library="images" name="#{product.id}.jpg" width="200" height="200" />
                        <h:form>
                            <h:commandLink action="#{productController.showProduct}" value="#{product.name}">
                                <f:param name="id" value="#{product.id}" />
                            </h:commandLink>
                        </h:form>
                        <div>#{product.description}</div>
                        <div>#{product.price} â‚¬</div>
                        <ui:fragment rendered="#{userController.isLoggedIn() and !userController.isAdmin()}">
                             <h:form>
                                 <h:inputText value="#{currentOrderController.orderQuantity}" styleClass="form-control">
                                    <f:ajax event="blur" listener="#{currentOrderController.setOrderQuantity}"/>
                                 </h:inputText>
                                 <h:commandLink action="#{currentOrderController.addProductToOrder}" value="Aggiungi all'ordine">
                                     <f:param name="id" value="#{product.id}" />
                                 </h:commandLink>
                            </h:form>
                        </ui:fragment>
                    </div>
                </ui:repeat>
            </div>

        </div>




    </ui:define>
</ui:composition>



</html>
