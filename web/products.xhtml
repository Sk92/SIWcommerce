<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<ui:composition template="/templates/default/main.xhtml">
    <ui:define name="content">

        <div class="container-fluid">

            <ui:repeat value="#{productController.productList}" var="product">
                <div class="sm-box">
                    <h:graphicImage library="images" name="#{product.id}.jpg" width="200" height="200" />
                    <div>#{product.name}</div>
                    <div>#{product.description}</div>
                    <div>#{product.price}</div>
                    <h:form>
                        <h:commandLink action="#{productController.showProduct}" value="Dettagli">
                            <f:param name="id" value="#{product.id}" />
                        </h:commandLink>
                    </h:form>
                    <ui:fragment rendered="#{userController.isLoggedIn()}">
                         <h:form>
                             <h:commandLink action="#{userController.addProductToOrder}" value="Aggiungi all'ordine">
                                 <f:param name="id" value="#{product.id}" />
                             </h:commandLink>
                        </h:form>
                    </ui:fragment>
                </div>
            </ui:repeat>

            <ui:fragment rendered="#{userController.isAdmin()}">
                <h:link value="Aggiungi un prodotto" outcome="addProduct" />
            </ui:fragment>

        </div>




    </ui:define>
</ui:composition>



</html>
